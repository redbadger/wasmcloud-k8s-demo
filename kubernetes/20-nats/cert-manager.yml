apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: selfsigning
spec:
  selfSigned: {}
---
# apiVersion: cert-manager.io/v1alpha2
# kind: Certificate
# metadata:
#   name: nats-ca
#   namespace: nats
# spec:
#   secretName: nats-ca
#   duration: 8736h # 1 year
#   renewBefore: 240h # 10 days
#   issuerRef:
#     name: selfsigning
#     kind: ClusterIssuer
#   commonName: nats-ca
#   usages:
#     - cert sign
#   organization:
#     - Red Badger
#   isCA: true
# ---
# apiVersion: cert-manager.io/v1alpha2
# kind: Issuer
# metadata:
#   name: nats-ca
#   namespace: nats
# spec:
#   ca:
#     secretName: nats-ca
# ---
# apiVersion: cert-manager.io/v1alpha2
# kind: Certificate
# metadata:
#   name: nats-server-tls
#   namespace: nats
# spec:
#   secretName: nats-server-tls
#   duration: 2160h # 90 days
#   renewBefore: 240h # 10 days
#   issuerRef:
#     name: nats-ca
#     kind: Issuer
#   usages:
#     - signing
#     - key encipherment
#     - server auth
#   organization:
#     - Red Badger
#   commonName: nats.nats.svc.cluster.local
#   dnsNames:
#     - nats.nats
#     - nats.nats
#     - nats.nats.svc
#     - nats.nats.svc.cluster.local
#     - "*.nats"
#     - "*.nats.nats"
#     - "*.nats.nats.svc"
---
apiVersion: cert-manager.io/v1alpha2
kind: Certificate
metadata:
  name: copy-of-nats-ca
  namespace: todo # This seems to be being ignored
spec:
  secretName: nats-ca
  duration: 8736h # 1 year
  renewBefore: 240h # 10 days
  issuerRef:
    name: selfsigning
    kind: ClusterIssuer
  commonName: nats-ca
  usages:
    - cert sign
  organization:
    - Red Badger
  isCA: true
